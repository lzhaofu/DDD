jQuery.fn.LoadImage=function(d,b,a,c){if(c==null)c="/Content/images/loading.gif";return this.each(function(){var f=$(this),i=$(this).attr("src"),e=new Image;e.src=i;var g=function(){if(d)if(e.width>0&&e.height>0)if(e.width/e.height>=b/a)if(e.width>b){f.width(b);f.height(parseInt(e.height*b/e.width))}else{f.width(e.width);f.height(e.height)}else if(e.height>a){f.height(a);f.width(parseInt(e.width*a/e.height))}else{f.width(e.width);f.height(e.height)}};if(e.complete){g();return}$(this).attr("src","");var h=$('<img alt="加载中..." title="图片加载中..." src="'+c+'" />');f.hide();f.after(h);$(e).load(function(){g();h.remove();f.attr("src",this.src);f.show()})})}